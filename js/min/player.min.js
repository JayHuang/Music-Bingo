$(function(){function i(){var i="songs/",n=$("<ol>");$(window.songlist.songs).each(function(t,l){$("<a>",{text:l.songname,"class":"song"}).attr("data-src",i+l.file).attr("data-playcount","0").attr("data-songid",l.id).appendTo(n).wrap("<li></li>")}),n.appendTo("#listing"),window.musicbingo={origwidth:$("ol").find("li").width(),origheight:$("ol").find("li").height(),marginbottom:parseInt($("ol").find("li").css("margin-bottom"))},$("ol").find("li").each(function(){$(this).hover(function(){$(this).stop().animate({height:2*window.musicbingo.origheight+window.musicbingo.marginbottom},200),$(this).children(":first").css({overflow:"visible","white-space":"normal"})},function(){$(this).stop().animate({height:window.musicbingo.origheight},100),$(this).children(":first").css({overflow:"hidden","white-space":"nowrap"})})})}function n(){var i,n=0,t=5,l=$("ol").find("li"),e=Math.ceil(l.length/t);l.each(function(){n%e===0&&(i=$('<div class="col"></div>').appendTo("ol")),$(this).appendTo(i),n++})}function t(){var i=$("#listing").find(".col"),n=["B","I","N","G","O"],t="<div class='columnlabel'></div>";if(5==i.length&&5==n.length)for(var l=0;l<n.length;l++)$(i[l]).prepend($(t).text(n[l]).append('<span class="colplayedcount"></span>'))}function l(){$(".colplayedcount","#listing");$(".col","#listing").each(function(){var i=$(this).find(".played").length+$(this).find(".playing").length,n=$(this).find(".colplayedcount");0!=i?(n.show(),n.text(i)):n.hide()})}function e(){var i=$("ol").width(),n=$("ol").find("li"),t=parseInt(n.css("marginLeft"))+parseInt(n.css("marginRight"));$("ol").find("li, .columnlabel").each(function(){$(this).width(i/5-t)}),window.musicbingo.origwidth=n.width(),window.musicbingo.origheight=n.height()}function a(){$("ol").find("li").first().addClass("playing")}function o(i){var n=$(".playing"),t=i||n.nextAll("li").not(".played").first(),e=n.children("a.song").attr("data-playcount");t.length||(t=$(".playing").parent().nextAll(".col").find("li").not(".played").first(),t.length||(t=$("ol li").not(".played").first())),n.children("a.song").attr("data-playcount",++e),n.removeClass("playing").addClass("played"),t.addClass("playing"),l(),u.load($("a",t).attr("data-src")),u.play()}function s(){var i=$(".playing").nextAll("li").not(".played").first();$(".queued").removeClass("queued"),i.length||(i=$(".playing").parent().nextAll(".col").find("li").not(".played").first(),i.length||(i=$("ol li").not(".played").first())),i.addClass("queued")}i(),n(),t(),e();{var d,c=document.body;document.getElementById("player")}window.addEventListener("scroll",function(){clearTimeout(d),c.classList.contains("disable-hover")||c.classList.add("disable-hover"),d=setTimeout(function(){c.classList.remove("disable-hover")},100)},!1),$(window).scroll(function(){var i=document.getElementById("player"),n=parseInt($(i).height())+parseInt($(i).css("paddingBottom"));$(window).scrollTop()>=1?($(".columnlabel").addClass("columnlabelfixed"),$(".columnlabel").css({top:n-1})):$(".columnlabel").removeClass("columnlabelfixed")}),$(window).resize(function(){r(function(){e()},30,"8239839")}),$("#resetsongs").on("click",function(i){i.preventDefault(),$("ol").find("li").each(function(){$(this).removeClass("played playing queued").attr("data-playcount",0)}),$(".col").find(".colplayedcount").each(function(){$(this).text("").hide()})});var r=function(){var i={};return function(n,t,l){l||(l="Don't call this twice without a uniqueID"),i[l]&&clearTimeout(i[l]),i[l]=setTimeout(n,t)}}(),h=audiojs.createAll({trackEnded:function(){o(),s()}}),u=h[0];first=$("ol a").attr("data-src"),a(),l(),s(),u.load(first),$("ol").find("li").click(function(i){i.preventDefault(),$(this).hasClass("playing")||(o($(this)),s())}),$(document).keydown(function(i){var n=i.charCode?i.charCode:i.keyCode;if(39==n){var t=$(".playing").next();t.length||(t=$("ol").find("li").first()),t.click()}else if(37==n){var l=$(".playing").prev();l.length||(l=$("ol").find("li").last()),l.click()}else 32==n&&(i.preventDefault(),u.playPause())})});