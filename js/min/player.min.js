$(function(){function i(){var i="songs/",t="songs/sample/",n=$("<ol>");$(window.songlist.songs).each(function(o,e){for(var a=$("<a>",{text:e.songname,"class":"song"}).attr("data-src",i+e.file).attr("data-sample",t+l(e.id)).attr("data-playcount","0").attr("data-songid",e.id).appendTo(n).wrap("<li></li>"),s=1;10>s;++s)a.clone(!0).appendTo(n).wrap("<li></li>")}),n.appendTo("#listing"),window.musicbingo={origwidth:$("ol").find("li").width(),origheight:$("ol").find("li").height(),marginbottom:parseInt($("ol").find("li").css("margin-bottom"))},$("ol").find("li").each(function(){$(this).hover(function(){$(this).stop().animate({height:2*window.musicbingo.origheight+window.musicbingo.marginbottom},200),$(this).children(":first").css({overflow:"visible","white-space":"normal"})},function(){$(this).stop().animate({height:window.musicbingo.origheight},100),$(this).children(":first").css({overflow:"hidden","white-space":"nowrap"})})})}function t(){var i,t=0,n=5,o=$("ol").find("li"),e=Math.ceil(o.length/n);o.each(function(){t%e===0&&(i=$('<div class="col"></div>').appendTo("ol")),$(this).appendTo(i),t++})}function n(){var i=$("#listing").find(".col"),t=["B","I","N","G","O"],n="<div class='columnlabel'></div>";if(5==i.length&&5==t.length)for(var o=0;o<t.length;o++)$(i[o]).prepend($(n).text(t[o]).append('<span class="colplayedcount"></span>'))}function o(){$(".colplayedcount","#listing");$(".col","#listing").each(function(){var i=$(this).find(".played").length+$(this).find(".playing").length,t=$(this).find(".colplayedcount");0!=i?(t.show(),t.text(i)):t.hide()})}function e(){var i=$("ol").width(),t=$("ol").find("li"),n=parseInt(t.css("marginLeft"))+parseInt(t.css("marginRight"));$("ol").find("li, .columnlabel").each(function(){$(this).width(i/5-n)}),window.musicbingo.origwidth=t.width(),window.musicbingo.origheight=t.height()}function a(i){var t=i||$("ol li.queued");t.length||(t=$(".playing").parent().nextAll(".col").find("li").not(".played").first(),t.length||(t=$("ol li").not(".played").first())),b.load($("a",t).attr("data-sample")),m=1e3*b.duration}function l(i){var t;switch(Math.floor((i-1)/15)){case 0:t="B.mp3";break;case 1:t="I.mp3";break;case 2:t="N.mp3";break;case 3:t="G.mp3";break;case 4:t="O.mp3"}return t}function s(){$("ol").find("li").first().addClass("playing")}function d(i){var t=$(".playing"),n=i||$("ol li.queued"),e=t.children("a.song").attr("data-playcount");n.length||(n=$(".playing").parent().nextAll(".col").find("li").not(".played").first(),n.length||(n=$("ol li").not(".played").first())),t.children("a.song").attr("data-playcount",++e),t.removeClass("playing"),n.addClass("playing"),o(),v.load($("a",n).attr("data-src")),document.getElementById("Narrator").checked?b.play():m=0,document.getElementById("Auto").checked&&(t.addClass("played"),setTimeout(function(){v.play()},m))}function c(){var i=$(".playing").nextAll("li").not(".played").first();if($(".queued").removeClass("queued"),document.getElementById("Random").checked){var t=$("ol div li").not(".played").not(".playing").length,n=Math.floor(Math.random()*t);$("ol div li").not(".played").not(".playing")[n].classList.add("queued")}else i.length||(i=$(".playing").parent().nextAll(".col").find("li").not(".played").first(),i.length||(i=$("ol li").not(".played").first())),i.addClass("queued")}function r(){$(".tabs .tab-links a").on("click",function(i){var t=$(this).attr("href");$(".tabs "+t).show().siblings().hide(),$(".tabs "+t).addClass("active").siblings().removeClass("active"),$(this).parent("li").addClass("active").siblings().removeClass("active"),i.preventDefault()})}function h(){var i="songs/",t=$("<ol>");$(window.intermission.songs).each(function(n,o){$("<a>",{text:o.songname,"class":"song"}).attr("data-src",i+o.file).attr("data-playcount","0").attr("data-songid",o.id).appendTo(t).wrap("<li></li>")}),t.appendTo("#intermission"),window.musicbingo={origwidth:$("ol").find("li").width(),origheight:$("ol").find("li").height(),marginbottom:parseInt($("ol").find("li").css("margin-bottom"))},$("ol").find("li").each(function(){$(this).hover(function(){$(this).stop().animate({height:2*window.musicbingo.origheight+window.musicbingo.marginbottom},200),$(this).children(":first").css({overflow:"visible","white-space":"normal"})},function(){$(this).stop().animate({height:window.musicbingo.origheight},100),$(this).children(":first").css({overflow:"hidden","white-space":"nowrap"})})})}function g(){var i="songs/",t=$("<ol>");$(window.intermission.songs).each(function(n,o){$("<a>",{text:o.songname,"class":"song"}).attr("data-src",i+o.file).attr("data-playcount","0").attr("data-songid",o.id).appendTo(t).wrap("<li></li>")}),t.appendTo("#sample"),window.musicbingo={origwidth:$("ol").find("li").width(),origheight:$("ol").find("li").height(),marginbottom:parseInt($("ol").find("li").css("margin-bottom"))},$("ol").find("li").each(function(){$(this).hover(function(){$(this).stop().animate({height:2*window.musicbingo.origheight+window.musicbingo.marginbottom},200),$(this).children(":first").css({overflow:"visible","white-space":"normal"})},function(){$(this).stop().animate({height:window.musicbingo.origheight},100),$(this).children(":first").css({overflow:"hidden","white-space":"nowrap"})})})}function u(){var i="songs/",t=$("<ol>");$(window.intermission.songs).each(function(n,o){$("<a>",{text:o.songname,"class":"song"}).attr("data-src",i+o.file).attr("data-playcount","0").attr("data-songid",o.id).appendTo(t).wrap("<li></li>")}),t.appendTo("#intro"),window.musicbingo={origwidth:$("ol").find("li").width(),origheight:$("ol").find("li").height(),marginbottom:parseInt($("ol").find("li").css("margin-bottom"))},$("ol").find("li").each(function(){$(this).hover(function(){$(this).stop().animate({height:2*window.musicbingo.origheight+window.musicbingo.marginbottom},200),$(this).children(":first").css({overflow:"visible","white-space":"normal"})},function(){$(this).stop().animate({height:window.musicbingo.origheight},100),$(this).children(":first").css({overflow:"hidden","white-space":"nowrap"})})})}i(),t(),n(),e(),r(),h(),g(),u();{var f,p=document.body;document.getElementById("player")}window.addEventListener("scroll",function(){clearTimeout(f),p.classList.contains("disable-hover")||p.classList.add("disable-hover"),f=setTimeout(function(){p.classList.remove("disable-hover")},100)},!1),$(window).scroll(function(){var i=document.getElementById("player"),t=parseInt($(i).height())+parseInt($(i).css("paddingBottom"));$(window).scrollTop()>=1?($(".columnlabel").addClass("columnlabelfixed"),$(".columnlabel").css({top:t-1})):$(".columnlabel").removeClass("columnlabelfixed")}),$(window).resize(function(){w(function(){e()},30,"8239839")}),$("#resetsongs").on("click",function(i){i.preventDefault(),$("ol").find("li").each(function(){$(this).removeClass("played playing queued").attr("data-playcount",0)}),$(".col").find(".colplayedcount").each(function(){$(this).text("").hide()});var t=document.getElementById("jay-audio");t.pause(),v.pause(),t.currentTime=0});var m,w=function(){var i={};return function(t,n,o){o||(o="Don't call this twice without a uniqueID"),i[o]&&clearTimeout(i[o]),i[o]=setTimeout(t,n)}}(),v=audiojs.create(document.getElementById("jay-audio"),{trackEnded:function(){d(),c()}}),b=audiojs.create(document.getElementById("sample-audio"),{trackEnded:function(){a()}});first=$("ol a").attr("data-src"),s(),o(),c(),v.load(first),$("ol").find("li").click(function(i){i.preventDefault(),$(this).hasClass("playing")||(a($(this)),d($(this)),c())}),$(document).keydown(function(i){var t=i.charCode?i.charCode:i.keyCode;if(39==t){var n=$(".playing").next();n.length||(n=$("ol").find("li").first()),n.click()}else if(37==t){var o=$(".playing").prev();o.length||(o=$("ol").find("li").last()),o.click()}else 32==t&&(i.preventDefault(),v.playPause())})});