$(function(){function i(){var i="songs/",n=$("<ol>");$(window.songlist.songs).each(function(a,l){var t=$("<a>",{text:l.songname+" - "+l.artist,"class":"song"}).attr("data-src",i+l.file).attr("data-playcount","0").attr("data-songid",l.id).appendTo(n).wrap("<li></li>");t.clone(!0).appendTo(n).wrap("<li></li>"),t.clone(!0).appendTo(n).wrap("<li></li>"),t.clone(!0).appendTo(n).wrap("<li></li>"),t.clone(!0).appendTo(n).wrap("<li></li>")}),n.appendTo("#listing"),window.musicbingo={origwidth:$("ol").find("li").width(),origheight:$("ol").find("li").height()},$("ol").find("li").each(function(){$(this).hover(function(){$(this).stop().animate({height:2*window.musicbingo.origheight},200),$(this).children(":first").css({overflow:"visible","white-space":"normal"})},function(){$(this).stop().animate({width:window.musicbingo.origwidth,height:window.musicbingo.origheight},100),$(this).children(":first").css({overflow:"hidden","white-space":"nowrap"})})}),n.appendTo("#listing")}function n(){var i,n=0,a=5,l=Math.ceil($("ol").find("li").length/a);$("ol").find("li").each(function(){n%l===0&&(i=$('<div class="col"></div>').appendTo("ol")),$(this).appendTo(i),n++})}function a(){var i=$("ol").width(),n=parseInt($("ol").find("li").css("marginLeft"))+parseInt($("ol").find("li").css("marginRight"));$("ol").find("li").each(function(){$(this).width(i/5-n)}),window.musicbingo.origwidth=$("ol").find("li").width(),window.musicbingo.origheight=$("ol").find("li").height()}function l(){$(".queued").removeClass("queued"),0==$(".playing").nextAll("li").not(".played").length?$(".playing").siblings().not(".played").first().addClass("queued"):$(".playing").nextAll("li").not(".played").first().addClass("queued")}i(),n(),a();var t,o=document.body,e=document.getElementById("player");window.addEventListener("scroll",function(){clearTimeout(t),o.classList.contains("disable-hover")||o.classList.add("disable-hover"),t=setTimeout(function(){o.classList.remove("disable-hover")},100)},!1),$(window).scroll(function(){$(window).scrollTop()>=70?$(e).addClass("fixedplayer"):$(e).removeClass("fixedplayer")}),$(window).resize(function(){s(function(){a()},30,"8239839")}),$("#resetsongs").on("click",function(i){i.preventDefault(),$("ol").find("li").each(function(){$(this).removeClass("played playing queued").attr("data-playcount",0)})});var s=function(){var i={};return function(n,a,l){l||(l="Don't call this twice without a uniqueId"),i[l]&&clearTimeout(i[l]),i[l]=setTimeout(n,a)}}(),d=audiojs.createAll({trackEnded:function(){var i=$(".playing"),n=i.nextAll("li").not(".played").first();n.length||(n=$("ol").find("li").siblings().not(".played").first());var a=i.children("a.song").attr("data-playcount");i.children("a.song").attr("data-playcount",++a),i.removeClass("playing").addClass("played"),n.addClass("playing"),l(),r.load($("a",n).attr("data-src")),r.play()}}),r=d[0];first=$("ol a").attr("data-src"),$("ol").find("li").first().addClass("playing"),l(),r.load(first),$("ol").find("li").click(function(i){i.preventDefault();var n=$(".playing"),a=n.children("a.song").attr("data-playcount");n.children("a.song").attr("data-playcount",++a),n.removeClass("playing").addClass("played"),$(this).addClass("playing").siblings(),l(),r.load($("a",this).attr("data-src")),r.play()}),$(document).keydown(function(i){var n=i.charCode?i.charCode:i.keyCode;if(39==n){var a=$(".playing").next();a.length||(a=$("ol").find("li").first()),a.click()}else if(37==n){var l=$(".playing").prev();l.length||(l=$("ol").find("li").last()),l.click()}else 32==n&&r.playPause()})});