function RandomChanged(){var n=$("ol div li").not(".played").not(".playing").length,i=Math.floor(Math.random()*n);$("ol li.playing").removeClass("playing"),$("ol div li").not(".played").not(".playing")[i].classList.add("playing"),updateQueued()}function playIntroSample(){var n="songs/intro/",i=new Audio(n+"intro.wav");i.play()}$(function(){function n(){var n="songs/",i="songs/sample/",t=$("<ol>");$(window.songlist.songs).each(function(e,l){for(var a=$("<a>",{text:l.songname,"class":"song"}).attr("data-src",n+l.file).attr("data-sample",i+o(l.id)).attr("data-playcount","0").attr("data-songid",l.id).appendTo(t).wrap("<li></li>"),d=1;10>d;++d)a.clone(!0).appendTo(t).wrap("<li></li>")}),t.appendTo("#listing"),window.musicbingo={origwidth:$("ol").find("li").width(),origheight:$("ol").find("li").height(),marginbottom:parseInt($("ol").find("li").css("margin-bottom"))},$("ol").find("li").each(function(){$(this).hover(function(){$(this).stop().animate({height:2*window.musicbingo.origheight+window.musicbingo.marginbottom},200),$(this).children(":first").css({overflow:"visible","white-space":"normal"})},function(){$(this).stop().animate({height:window.musicbingo.origheight},100),$(this).children(":first").css({overflow:"hidden","white-space":"nowrap"})})})}function i(){var n,i=0,t=5,e=$("ol").find("li"),l=Math.ceil(e.length/t);e.each(function(){i%l===0&&(n=$('<div class="col"></div>').appendTo("ol")),$(this).appendTo(n),i++})}function t(){var n=$("#listing").find(".col"),i=["B","I","N","G","O"],t="<div class='columnlabel'></div>";if(5==n.length&&5==i.length)for(var e=0;e<i.length;e++)$(n[e]).prepend($(t).text(i[e]).append('<span class="colplayedcount"></span>'))}function e(){$(".colplayedcount","#listing");$(".col","#listing").each(function(){var n=$(this).find(".played").length+$(this).find(".playing").length,i=$(this).find(".colplayedcount");0!=n?(i.show(),i.text(n)):i.hide()})}function l(){var n=$("ol").width(),i=$("ol").find("li"),t=parseInt(i.css("marginLeft"))+parseInt(i.css("marginRight"));$("ol").find("li, .columnlabel").each(function(){$(this).width(n/5-t)}),window.musicbingo.origwidth=i.width(),window.musicbingo.origheight=i.height()}function a(n){var i=n||$("ol li.queued");i.length||(i=$(".playing").parent().nextAll(".col").find("li").not(".played").first(),i.length||(i=$("ol li").not(".played").first())),m.load($("a",i).attr("data-sample")),f=1e3*m.duration}function o(n){var i;switch(Math.floor((n-1)/15)){case 0:i="B.mp3";break;case 1:i="I.mp3";break;case 2:i="N.mp3";break;case 3:i="G.mp3";break;case 4:i="O.mp3"}return i}function d(){$("ol").find("li").first().addClass("playing")}function s(n){var i=$(".playing"),t=n||i.nextAll("li").not(".played").first(),l=i.children("a.song").attr("data-playcount");t.length||(t=$(".playing").parent().nextAll(".col").find("li").not(".played").first(),t.length||(t=$("ol li").not(".played").first())),i.children("a.song").attr("data-playcount",++l),i.removeClass("playing"),t.addClass("playing"),e(),g.load($("a",t).attr("data-src")),document.getElementById("Narrator").checked&&m.play(),document.getElementById("Auto").checked&&(i.addClass("played"),setTimeout(function(){g.play()},f))}function c(){var n=$(".playing").nextAll("li").not(".played").first();if($(".queued").removeClass("queued"),document.getElementById("Random").checked){var i=$("ol div li").not(".played").not(".playing").length,t=Math.floor(Math.random()*i);$("ol div li").not(".played").not(".playing")[t].classList.add("queued")}else n.length||(n=$(".playing").parent().nextAll(".col").find("li").not(".played").first(),n.length||(n=$("ol li").not(".played").first())),n.addClass("queued")}n(),i(),t(),l();var r,u=document.body,p=document.getElementById("player");window.addEventListener("scroll",function(){clearTimeout(r),u.classList.contains("disable-hover")||u.classList.add("disable-hover"),r=setTimeout(function(){u.classList.remove("disable-hover")},100)},!1),$(window).scroll(function(){$(window).scrollTop()>=70?($(p).addClass("fixedplayer"),$(".columnlabel").addClass("columnlabelfixed")):($(p).removeClass("fixedplayer"),$(".columnlabel").removeClass("columnlabelfixed"))}),$(window).resize(function(){h(function(){l()},30,"8239839")}),$("#resetsongs").on("click",function(n){n.preventDefault(),$("ol").find("li").each(function(){$(this).removeClass("played playing queued").attr("data-playcount",0)}),$(".col").find(".colplayedcount").each(function(){$(this).text("").hide()})});var f,h=function(){var n={};return function(i,t,e){e||(e="Don't call this twice without a uniqueID"),n[e]&&clearTimeout(n[e]),n[e]=setTimeout(i,t)}}(),g=audiojs.create(document.getElementById("jay-audio"),{trackEnded:function(){s(),c()}}),m=audiojs.create(document.getElementById("sample-audio"),{trackEnded:function(){a()}});first=$("ol a").attr("data-src"),d(),e(),c(),g.load(first),$("ol").find("li").click(function(n){n.preventDefault(),a($(this)),s($(this)),c()}),$(document).keydown(function(n){var i=n.charCode?n.charCode:n.keyCode;if(39==i){var t=$(".playing").next();t.length||(t=$("ol").find("li").first()),t.click()}else if(37==i){var e=$(".playing").prev();e.length||(e=$("ol").find("li").last()),e.click()}else 32==i&&(n.preventDefault(),g.playPause())})});