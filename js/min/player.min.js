$(function(){function i(){var i="songs/",a=$("<ol>");$(window.songlist.songs).each(function(t,n){$("<a>",{text:n.songname+" - "+n.artist,"class":"song"}).attr("data-src",i+n.file).attr("data-playcount","0").attr("data-songid",n.id).appendTo(a).wrap("<li></li>")}),a.appendTo("div#player"),window.musicbingo={origwidth:$("a.song").parent().width(),origheight:$("a.song").parent().height()},$("a.song").parent().each(function(){$(this).hover(function(){$(this).stop().animate({height:2*window.musicbingo.origheight},300),$(this).children(":first").css({overflow:"visible","white-space":"normal"})},function(){$(this).stop().animate({width:window.musicbingo.origwidth,height:window.musicbingo.origheight},300),$(this).children(":first").css({overflow:"hidden","white-space":"nowrap"})})}),a.appendTo("div#player")}function a(){var i=$("ol").width(),a=parseInt($("ol li").css("marginLeft"))+parseInt($("ol li").css("marginRight"));$("a.song").each(function(){$(this).parent().width(i/5-a)}),window.musicbingo.origwidth=$("a.song").parent().width(),window.musicbingo.origheight=$("a.song").parent().height()}function t(){$("ol li.queued").removeClass("queued"),0==$("ol li.playing").nextAll("li").not(".played").length?$("ol li.playing").siblings().not(".played").first().addClass("queued"):$("ol li.playing").nextAll("li").not(".played").first().addClass("queued")}i(),a(),$(window).resize(function(){n(function(){a()},100,"8239839")}),$("#resetsongs").on("click",function(i){i.preventDefault(),$("ol li").each(function(){$(this).removeClass("played playing queued").attr("data-playcount",0)})});var n=function(){var i={};return function(a,t,n){n||(n="Don't call this twice without a uniqueId"),i[n]&&clearTimeout(i[n]),i[n]=setTimeout(a,t)}}(),l=audiojs.createAll({trackEnded:function(){var i=$("ol li.playing"),a=i.nextAll("li").not(".played").first(),n=i.children("a.song").attr("data-playcount");i.children("a.song").attr("data-playcount",++n),a.length||(a=$("ol li").first()),i.removeClass("playing").addClass("played"),a.addClass("playing"),t(),o.load($("a",a).attr("data-src")),o.play()}}),o=l[0];first=$("ol a").attr("data-src"),$("ol li").first().addClass("playing"),t(),o.load(first),$("ol li").click(function(i){i.preventDefault();var a=$("ol li.playing"),n=a.children("a.song").attr("data-playcount");a.children("a.song").attr("data-playcount",++n),a.removeClass("playing").addClass("played"),$(this).addClass("playing").siblings(),t(),o.load($("a",this).attr("data-src")),o.play()}),$(document).keydown(function(i){var a=i.charCode?i.charCode:i.keyCode;if(39==a){var t=$("li.playing").next();t.length||(t=$("ol li").first()),t.click()}else if(37==a){var n=$("li.playing").prev();n.length||(n=$("ol li").last()),n.click()}else 32==a&&o.playPause()})});